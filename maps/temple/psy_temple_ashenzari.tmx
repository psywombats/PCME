<?xml version="1.0" encoding="UTF-8"?>
<map version="2017.05.26" orientation="orthogonal" renderorder="right-down" width="31" height="31" tilewidth="32" tileheight="32" backgroundcolor="#000000" nextobjectid="1">
 <properties>
  <property name="code">NSUBST:     A = 1:{ / *:.
KFEAT:      r = x
{{
    function callback.temple_ashenzari(data, triggerable, triggerer, marker, ev)
      if not dgn.persist.temple_ashenzari_triggered then
        for slave in iter.slave_iterator(&quot;to_glass&quot;, 1) do
          dgn.terrain_changed(slave.x, slave.y, &quot;clear_rock_wall&quot;, false)
        end
        crawl.god_speaks(&quot;Ashenzari&quot;, 'You receive a providential revelation.')
        dgn.persist.temple_ashenzari_triggered = true
      end
    end

    dgn.persist.temple_ashenzari_triggered = false
    local los_marker = TriggerableFunction:new {
      func=&quot;callback.temple_ashenzari&quot;,
      repeated=false
    }
    los_marker:add_triggerer(DgnTriggerer:new {type=&quot;player_los&quot;})
    lua_marker('a', los_marker)
    lua_marker('r', props_marker {to_glass=1})
    lua_marker('c', props_marker {to_glass=1})
}}</property>
  <property name="comment" value="18 altars + Ash. Features rings that turn to glass."/>
  <property name="orient" value="encompass"/>
  <property name="place" value="Temple"/>
  <property name="weight" value="3"/>
 </properties>
 <tileset firstgid="1" source="../tilesets/features.tsx"/>
 <tileset firstgid="205" source="../tilesets/basic.tsx"/>
 <layer name="Tile Layer" width="31" height="31">
  <data encoding="csv">
0,0,0,0,0,206,206,206,206,206,0,0,0,0,0,0,0,0,0,206,206,206,0,0,0,0,0,0,0,0,0,
0,0,0,0,206,206,205,206,205,206,206,0,0,206,206,206,0,0,206,206,205,206,0,0,0,0,0,0,0,0,0,
0,0,0,206,206,205,205,206,205,205,206,206,206,206,205,206,206,206,206,205,205,206,206,206,206,206,206,206,0,0,0,
0,0,0,206,205,37,205,206,205,37,205,206,206,205,37,205,206,206,205,37,205,206,205,205,37,205,205,206,0,0,0,
0,0,0,206,206,205,205,206,205,205,206,206,205,205,205,205,205,206,206,205,205,206,206,205,205,205,206,206,0,0,0,
0,0,0,206,206,160,121,160,121,160,160,160,160,160,121,160,160,160,160,160,121,160,160,160,121,160,206,206,206,0,0,
0,0,206,206,206,160,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,160,206,205,206,206,0,
0,206,206,205,206,160,205,113,205,205,205,205,205,205,205,113,205,205,205,205,205,205,205,113,205,160,205,37,205,206,206,
206,206,205,37,205,160,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,121,205,205,205,205,206,
206,205,205,205,205,121,205,205,205,209,209,209,209,209,209,121,209,209,209,209,209,209,205,205,205,160,206,206,206,206,206,
206,206,206,206,206,160,205,205,205,209,205,205,205,205,205,205,205,205,205,205,205,209,205,205,205,160,206,205,206,0,0,
0,0,206,205,206,160,205,205,205,209,205,209,209,209,209,209,209,209,209,209,205,209,205,205,205,160,205,205,206,0,0,
0,0,206,205,205,160,205,205,205,209,205,209,205,205,205,205,205,205,205,209,205,209,205,205,205,121,205,37,206,0,0,
0,0,206,37,205,121,205,205,205,209,205,209,205,209,209,121,209,209,205,209,205,209,205,205,205,160,205,205,206,0,0,
0,0,206,205,205,160,205,205,205,209,205,209,205,209,205,205,205,209,205,209,205,209,205,205,205,160,206,205,206,0,0,
0,0,206,205,206,160,205,113,205,209,205,209,205,209,205,39,205,209,205,209,205,209,205,113,205,160,206,206,206,206,206,
0,0,206,206,206,160,205,205,205,209,205,209,205,209,205,205,205,209,205,209,205,209,205,205,205,121,205,205,205,205,206,
0,0,206,206,205,160,205,205,205,209,205,209,205,209,209,209,209,209,205,209,205,209,205,205,205,160,205,37,205,206,206,
0,206,206,205,205,160,205,205,205,209,205,209,205,205,205,205,205,205,205,209,205,209,205,205,205,160,206,205,206,206,0,
0,206,205,37,205,121,205,205,205,209,205,209,209,209,209,121,209,209,209,209,205,209,205,205,205,160,206,206,206,0,0,
0,206,206,205,205,160,205,205,205,209,205,205,205,205,205,205,205,205,205,205,205,209,205,205,205,160,205,206,206,0,0,
0,0,206,206,205,160,205,205,205,209,209,209,209,209,209,209,209,209,209,209,209,209,205,205,205,160,205,205,206,206,0,
206,206,206,206,206,160,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,121,205,37,205,206,0,
206,205,205,205,205,121,205,113,205,205,205,205,205,205,205,113,205,205,205,205,205,205,205,113,205,160,205,205,206,206,0,
206,206,205,37,205,160,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,160,205,206,206,0,0,
0,206,206,205,206,160,160,121,160,160,160,160,160,121,160,160,160,160,121,160,160,160,160,160,121,160,206,206,0,0,0,
0,0,206,206,206,206,205,205,205,206,206,205,205,205,205,205,206,206,205,205,206,206,206,205,205,205,206,206,0,0,0,
0,0,0,0,206,205,205,37,205,205,206,206,205,37,205,206,206,206,205,37,205,206,205,205,37,205,205,206,0,0,0,
0,0,0,0,206,206,206,206,206,206,206,206,206,205,206,206,0,206,205,205,206,206,206,206,206,206,206,206,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,206,206,206,0,0,206,205,206,206,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,206,206,206,0,0,0,0,0,0,0,0,0,0,0
</data>
 </layer>
 <layer name="Feature Layer" width="31" height="31">
  <data encoding="csv">
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
</data>
 </layer>
 <layer name="Tag Layer" width="31" height="31">
  <data encoding="csv">
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
</data>
 </layer>
 <objectgroup name="Scripting Layer"/>
</map>
